<section class="product-showcase" aria-labelledby="ProductShowcaseHeading-{{ section.id }}" data-showcase>
  <div class="product-showcase__info">
    <h2 id="ProductShowcaseHeading-{{ section.id }}">{{ section.settings.heading }}</h2>
    <p>{{ section.settings.description }}</p>
    {% if section.settings.product_handle != blank %}
      {% assign product = all_products[section.settings.product_handle] %}
      {% if product %}
        {% assign rating_value = 5 %}
        {% assign rating_count = 1 %}
        {% if product.metafields.reviews.rating %}
          {% assign rating_value = product.metafields.reviews.rating.value | default: 5 %}
        {% endif %}
        {% if product.metafields.reviews.rating_count %}
          {% assign rating_count = product.metafields.reviews.rating_count.value | default: 1 %}
        {% endif %}
        <div class="product-showcase__meta">
          <span class="product-showcase__price">{% render 'price', product: product %}</span>
          {% render 'rating-stars', rating: rating_value, count: rating_count %}
        </div>
        <a class="btn btn--primary btn--xl" href="{{ product.url }}">{{ 'general.buttons.discover' | t }}</a>
      {% endif %}
    {% endif %}
  </div>
  <div class="product-showcase__canvas" data-product-model data-model="{{ section.settings.model_asset }}" aria-label="{{ section.settings.heading }}"></div>
</section>

{% schema %}
{
  "name": "Vitrine produit 3D",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Titre",
      "default": "SafeWalk Pro"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "La canne intelligente qui veille sur vos déplacements."
    },
    {
      "type": "product",
      "id": "product_handle",
      "label": "Produit associé"
    },
    {
      "type": "text",
      "id": "model_asset",
      "label": "Modèle 3D (GLB)",
      "default": "safewalk-pro.glb"
    }
  ],
  "presets": [
    {
      "name": "Vitrine produit 3D"
    }
  ]
}
{% endschema %}
